-- Script Jar.xHub by FajarGamingOfficial
-- Update v5: Ikon Tab THEME bergambar Gear

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Jar.xHub",
   LoadingTitle = "Jar.xHub",
   LoadingSubtitle = "by FajarGamingOfficial",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "JarHub",
      FileName = "ConfigJar"
   }
})

-- TAB 1: PLAYER (Ikon Orang)
local TabMain = Window:CreateTab("PLAYER", 4483362458)

TabMain:CreateSlider({
   Name = "WalkSpeed",
   Range = {16, 500}, 
   Increment = 1, 
   CurrentValue = 16, 
   Flag = "SpeedSlider", 
   Callback = function(Value)
       game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
   end
})

TabMain:CreateSlider({
   Name = "JumpPower",
   Range = {50, 300}, 
   Increment = 1, 
   CurrentValue = 50, 
   Flag = "JumpSlider", 
   Callback = function(Value)
       game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
   end
})

-- TAB 2: TELEPORT (Ikon Lokasi)
local TabTeleport = Window:CreateTab("TELEPORT", 4483342458)

TabTeleport:CreateInput({
   Name = "GO TO",
   PlaceholderText = "User",
   RemoveTextAfterFocusLost = false,
   Callback = function(Text)
       TargetInisial = Text 
       Rayfield:Notify({Title = "Jar.xHub", Content = "Mencari: "..Text, Duration = 2})
   end
})

TabTeleport:CreateButton({
   Name = "TELEPORT",
   Callback = function()
       local me = game.Players.LocalPlayer
       if TargetInisial and TargetInisial ~= "" then
           local foundPlayer = nil
           local foundName = ""
           local lowerTarget = string.lower(TargetInisial)

           for i, player in pairs(game.Players:GetPlayers()) do
               if player ~= me then
                   local playerName = string.lower(player.Name)
                   if string.find(playerName, lowerTarget) then
                       foundPlayer = player
                       foundName = player.Name
                       break
                   end
               end
           end

           if foundPlayer and foundPlayer.Character and foundPlayer.Character:FindFirstChild("HumanoidRootPart") then
               if me.Character and me.Character:FindFirstChild("HumanoidRootPart") then
                   me.Character.HumanoidRootPart.CFrame = foundPlayer.Character.HumanoidRootPart.CFrame
                   Rayfield:Notify({Title = "Jar.xHub", Content = "Teleport to: "..foundName, Duration = 3})
               end
           else
               Rayfield:Notify({Title = "Error", Content = "Player '"..TargetInisial.."' tidak ketemu!", Duration = 3})
           end
       else
           Rayfield:Notify({Title = "Error", Content = "Ketik inisial dulu!", Duration = 2})
       end
   end
})

-- TAB 3: ESP (Ikon Mata)
local TabVisual = Window:CreateTab("ESP", 4483345998)

local EspEnabled = false
local EspBoxes = {}

local function UpdateEsp()
    if not EspEnabled then
        for _, v in pairs(EspBoxes) do
            if v and v.Parent then
                v:Destroy()
            end
        end
        EspBoxes = {}
        return
    end

    -- 1. Loop untuk PLAYERS (Warna BIRU)
    for i, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local existingEsp = EspBoxes[player.Name]
            
            if not existingEsp then
                local highlight = Instance.new("Highlight")
                highlight.Name = "JarESP_Player"
                highlight.FillColor = Color3.fromRGB(0, 0, 255) -- BIRU
                highlight.OutlineColor = Color3.fromRGB(255,255,255)
                highlight.FillTransparency = 0.3
                highlight.OutlineTransparency = 0
                highlight.Adornee = player.Character
                highlight.Parent = player.Character
                EspBoxes[player.Name] = highlight
            end
        end
    end

    -- 2. Loop untuk NPC/MONSTER (Warna HIJAU)
    for _, obj in pairs(workspace:GetChildren()) do
        if obj:IsA("Model") and obj ~= game.Players.LocalPlayer.Character then
            
            local humanoid = obj:FindFirstChild("Humanoid")
            local hrp = obj:FindFirstChild("HumanoidRootPart")

            if humanoid and hrp then
                local isPlayer = false
                for _, plr in pairs(game.Players:GetPlayers()) do
                    if plr.Character == obj then
                        isPlayer = true
                        break
                    end
                end

                if not isPlayer then
                    local existingEsp = EspBoxes[obj.Name]
                    
                    if not existingEsp then
                        local highlight = Instance.new("Highlight")
                        highlight.Name = "JarESP_Monster"
                        highlight.FillColor = Color3.fromRGB(0, 255, 0) -- HIJAU
                        highlight.OutlineColor = Color3.fromRGB(0, 0, 0)
                        highlight.FillTransparency = 0.4
                        highlight.OutlineTransparency = 0
                        highlight.Adornee = obj
                        highlight.Parent = obj
                        EspBoxes[obj.Name] = highlight
                    end
                end
            end
        end
    end
end

TabVisual:CreateToggle({
   Name = "Player & Monster",
   CurrentValue = false,
   Flag = "ESPToggle",
   Callback = function(Value)
       EspEnabled = Value
       
       if Value then
           Rayfield:Notify({Title = "Jar.xHub", Content = "ESP ON!", Duration = 2})
           for _, v in pairs(EspBoxes) do if v and v.Parent then v:Destroy() end end
           EspBoxes = {}
           
           spawn(function()
               while EspEnabled do
                   UpdateEsp()
                   wait(2)
               end
           end)
       else
           Rayfield:Notify({Title = "Jar.xHub", Content = "ESP OFF", Duration = 2})
           UpdateEsp()
       end
   end
})

-- TAB 4: THEME (IKON GEAR / GERIGI)
local TabTheme = Window:CreateTab("THEME", 6034167891) -- ID IKON GEAR

TabTheme:CreateDropdown({
   Name = "Select Theme (UI)",
   Options = {"Default", "Ammely", "Grape", "Blue", "Dark", "Serika"},
   CurrentOption = "Default",
   Flag = "ThemeSelector",
   Callback = function(Option)
       -- Otomatis save
   end
})

Rayfield:LoadConfiguration()
