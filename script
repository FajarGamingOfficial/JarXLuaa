-- Script Jar.xHub by FajarGamingOfficial
-- Update: 3 Tab (Main, Teleport, Visual/ESP)

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Jar.xHub",
   LoadingTitle = "Jar.xHub",
   LoadingSubtitle = "by FajarGamingOfficial",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "JarHub",
      FileName = "ConfigJar"
   }
})

-- TAB 1: MAIN (SPEED & JUMP)
local TabMain = Window:CreateTab("Main", 4483362458)

-- 1. FITUR SPEED (SLIDER)
TabMain:CreateSlider({
   Name = "WalkSpeed",
   Range = {0, 500}, 
   Increment = 1, 
   CurrentValue = 16, 
   Flag = "SpeedSlider", 
   Callback = function(Value)
       game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
   end
})

-- 2. FITUR JUMP (SLIDER)
TabMain:CreateSlider({
   Name = "JumpPower",
   Range = {0, 300}, 
   Increment = 1, 
   CurrentValue = 50, 
   Flag = "JumpSlider", 
   Callback = function(Value)
       game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
   end
})

-- TAB 2: TELEPORT
local TabTeleport = Window:CreateTab("Teleport", 4483342458)

-- 3. FITUR TELEPORT CERDAS
TabTeleport:CreateInput({
   Name = "Ketik Inisial/Huruf",
   PlaceholderText = "Misal: S, A, Player...",
   RemoveTextAfterFocusLost = false,
   Callback = function(Text)
       TargetInisial = Text 
       Rayfield:Notify({Title = "Jar.xHub", Content = "Mencari: "..Text, Duration = 2})
   end
})

TabTeleport:CreateButton({
   Name = "TELEPORT (Cari Otomatis)",
   Callback = function()
       local me = game.Players.LocalPlayer
       
       if TargetInisial and TargetInisial ~= "" then
           local foundPlayer = nil
           local foundName = ""
           local lowerTarget = string.lower(TargetInisial)

           for i, player in pairs(game.Players:GetPlayers()) do
               if player ~= me then
                   local playerName = string.lower(player.Name)
                   if string.find(playerName, lowerTarget) then
                       foundPlayer = player
                       foundName = player.Name
                       break
                   end
               end
           end

           if foundPlayer and foundPlayer.Character and foundPlayer.Character:FindFirstChild("HumanoidRootPart") then
               if me.Character and me.Character:FindFirstChild("HumanoidRootPart") then
                   me.Character.HumanoidRootPart.CFrame = foundPlayer.Character.HumanoidRootPart.CFrame
                   Rayfield:Notify({Title = "Jar.xHub", Content = "Teleport ke: "..foundName, Duration = 3})
               end
           else
               Rayfield:Notify({Title = "Error", Content = "Player '"..TargetInisial.."' tidak ketemu!", Duration = 3})
           end
       else
           Rayfield:Notify({Title = "Error", Content = "Ketik inisial dulu!", Duration = 2})
       end
   end
})

-- TAB 3: VISUAL (ESP)
local TabVisual = Window:CreateTab("Visual", 4483345998)

-- Variabel untuk menyimpan ESP agar bisa dimatikan
local EspEnabled = false
local EspBoxes = {}

-- Fungsi membuat garis/kotak di atas kepala
local function UpdateEsp()
    -- Hapus ESP lama jika mati
    if not EspEnabled then
        for _, v in pairs(EspBoxes) do
            if v and v.Parent then
                v:Destroy()
            end
        end
        EspBoxes = {}
        return
    end

    -- Loop semua player
    for i, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            
            -- Cek apakah sudah ada ESP untuk player ini
            local existingEsp = EspBoxes[player.Name]
            
            if not existingEsp then
                -- Buat GUI baru (Highlight)
                local highlight = Instance.new("Highlight")
                highlight.Name = "JarESPHighlight"
                highlight.FillColor = Color3.fromRGB(255, 0, 0) -- Merah
                highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                highlight.FillTransparency = 0.5
                highlight.OutlineTransparency = 0
                highlight.Adornee = player.Character
                highlight.Parent = player.Character
                EspBoxes[player.Name] = highlight
            end
        end
    end
end

TabVisual:CreateToggle({
   Name = "ESP Player (Red Highlight)",
   CurrentValue = false,
   Flag = "ESPToggle",
   Callback = function(Value)
       EspEnabled = Value
       
       if Value then
           Rayfield:Notify({Title = "Jar.xHub", Content = "ESP ON!", Duration = 2})
           -- Jalankan loop ESP
           spawn(function()
               while EspEnabled do
                   UpdateEsp()
                   wait(1) -- Update tiap 1 detik
               end
           end)
       else
           Rayfield:Notify({Title = "Jar.xHub", Content = "ESP OFF", Duration = 2})
           UpdateEsp() -- Fungsi ini akan menghapus ESP
       end
   end
})

Rayfield:LoadConfiguration()
